# =============================================================================
# KneafMod Async Logging & Performance Configuration
# =============================================================================
# 
# This file controls the behavior of the async logging and metrics system.
# All logging and metrics operations are NON-BLOCKING by default.
#

# -----------------------------------------------------------------------------
# Async Logging Settings
# -----------------------------------------------------------------------------

# Enable/disable async logging globally
# true = All logging is async (recommended)
# false = Fallback to synchronous logging
async.logging.enabled=true

# Ring buffer size untuk async logger (must be power of 2)
# Larger = More buffering, less drops, but more memory
# Default: 8192 entries (≈512KB per logger)
async.logging.ring_buffer_size=8192

# Batch size untuk log processing
# Larger = More efficient I/O, but higher latency
# Default: 32 messages per batch
async.logging.batch_size=32

# Max time to wait untuk draining logs on shutdown (milliseconds)
# Default: 5000ms (5 seconds)
async.logging.shutdown_drain_ms=5000

# Log level untuk async logger
# TRACE, DEBUG, INFO, WARN, ERROR
async.logging.level=INFO

# -----------------------------------------------------------------------------
# Async Metrics Settings
# -----------------------------------------------------------------------------

# Enable/disable async metrics collection
async.metrics.enabled=true

# Sampling rate (0-100)
# 100 = Sample all metrics (default)
# 50 = Sample 50% of metrics (reduces overhead)
# 10 = Sample 10% of metrics (minimal overhead)
async.metrics.sampling_rate=100

# Ring buffer size untuk histograms (must be power of 2)
# Default: 16384 values (≈128KB)
async.metrics.histogram_buffer_size=16384

# Ring buffer size untuk timers (must be power of 2)
# Default: 16384 values (≈128KB)
async.metrics.timer_buffer_size=16384

# Aggregation interval (milliseconds)
# How often to aggregate and report metrics
# Default: 5000ms (5 seconds)
async.metrics.aggregation_interval_ms=5000

# -----------------------------------------------------------------------------
# Thread Pool Settings
# -----------------------------------------------------------------------------

# Thread pool size untuk general async operations
# auto = CPU cores / 4
# or specify a number
async.thread_pool.size=auto

# Thread priority untuk async threads
# MIN = Minimum priority (recommended untuk avoid blocking gameplay)
# NORM = Normal priority
# MAX = Maximum priority
async.thread_pool.priority=MIN

# -----------------------------------------------------------------------------
# Performance Monitoring
# -----------------------------------------------------------------------------

# Enable automatic performance monitoring
async.monitoring.enabled=true

# Print statistics interval (seconds)
# 0 = Disabled
# 60 = Print every minute
async.monitoring.stats_interval_seconds=300

# Alert thresholds
async.monitoring.alert.drop_rate_percent=5.0
async.monitoring.alert.pending_messages=1000
async.monitoring.alert.memory_mb=100

# -----------------------------------------------------------------------------
# Advanced Settings
# -----------------------------------------------------------------------------

# Enable lock-free optimizations
# true = Use lock-free ring buffers (fastest, recommended)
# false = Use synchronized collections (safer, slower)
async.advanced.lock_free=true

# Enable lazy message evaluation
# true = Delay string formatting until actually logged (recommended)
# false = Format messages immediately
async.advanced.lazy_evaluation=true

# Enable batch processing
# true = Process logs in batches (more efficient)
# false = Process logs one-by-one
async.advanced.batch_processing=true

# Cache line padding untuk avoid false sharing
# true = Add padding to atomic fields (faster on multi-core)
# false = No padding (saves memory)
async.advanced.cache_line_padding=true

# -----------------------------------------------------------------------------
# Debug Settings
# -----------------------------------------------------------------------------

# Print async logging statistics on startup
async.debug.print_stats_on_startup=false

# Print async logging statistics on shutdown
async.debug.print_stats_on_shutdown=true

# Enable detailed debug logging untuk async system itself
async.debug.verbose_logging=false

# Track individual logger statistics
async.debug.track_individual_loggers=true
