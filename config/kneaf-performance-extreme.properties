# Kneaf performance mod EXTREME configuration
# Ultra-aggressive optimization settings for maximum performance
# WARNING: This configuration disables safety checks and may cause instability

# Enable/disable the performance manager
enabled=true

# Number of threads in the background worker pool (minimum 1)
threadPoolSize=8

# How often (in ticks) to append metrics to run/logs/kneaf-performance.log
logIntervalTicks=1000

# TPS threshold to prefer async processing (rolling average). When avg TPS >= this value,
# heavy processing will be offloaded to background threads. Set high to reduce background work.
tpsThresholdForAsync=17.0

# Profiling configuration
# Enable/disable performance profiling
profilingEnabled=true

# Threshold in milliseconds for considering a tick "slow" and logging detailed timing
slowTickThresholdMs=25

# Sample rate for profiling (1 = every tick, 2 = every 2nd tick, etc.)
profilingSampleRate=1

# Advanced Parallelism Configuration
# Minimum number of threads in the pool (dynamic scaling)
minThreadPoolSize=4

# Enable dynamic thread scaling based on workload
dynamicThreadScaling=true

# Thread pool utilization threshold to scale up (0.0-1.0)
threadScaleUpThreshold=0.6

# Thread pool utilization threshold to scale down (0.0-1.0)
threadScaleDownThreshold=0.2

# Delay in ticks before scaling up thread count
threadScaleUpDelayTicks=25

# Delay in ticks before scaling down thread count
threadScaleDownDelayTicks=50

# Enable work-stealing for better load balancing
workStealingEnabled=true

# Maximum queue size for work-stealing
workStealingQueueSize=200

# Enable CPU-aware thread sizing
cpuAwareThreadSizing=true

# CPU load threshold for thread sizing decisions (0.0-1.0)
cpuLoadThreshold=0.9

# Keep-alive time in seconds for idle threads
threadPoolKeepAliveSeconds=30

# Chunk Storage Configuration
# Enable FastNBT mode for high-performance NBT serialization (default: false)
enableFastNbt=true

# Swap I/O Optimization Configuration
# Enable asynchronous prefetching for swap operations (default: false)
swapAsyncPrefetching=true

# Enable compression for swap data (default: false)
swapCompression=true

# Compression level (0-9, 0=none, 9=maximum)
swapCompressionLevel=9

# Enable memory-mapped files for swap operations (default: false)
swapMemoryMappedFiles=true

# Maximum number of concurrent async prefetch operations
swapAsyncPrefetchLimit=8

# Prefetch buffer size in MB
swapPrefetchBufferSize=128

# Non-blocking I/O mode (true=non-blocking, false=blocking)
swapNonBlockingIo=true

# Memory-mapped file cache size in MB
swapMmapCacheSize=256

# Enable swap operation batching (default: true)
swapOperationBatching=true

# Maximum batch size for swap operations
swapMaxBatchSize=64

# Extreme SIMD Optimization Configuration
# Enable extreme AVX-512 optimizations (requires compatible CPU)
enableExtremeAvx512=true

# Enable lock-free memory pooling
enableLockFreePooling=true

# Memory pressure threshold for aggressive cleanup (0.0-1.0)
memoryPressureThreshold=0.9

# Enable aggressive memory pre-allocation
enableAggressivePreallocation=true

# Pre-allocation buffer size in MB
preallocationBufferSize=512

# Safety Configuration (DISABLED FOR EXTREME PERFORMANCE)
# Disable safety checks for maximum performance
enableSafetyChecks=false

# Disable memory leak detection
enableMemoryLeakDetection=false

# Disable performance monitoring overhead
enablePerformanceMonitoring=false

# Disable error recovery mechanisms
enableErrorRecovery=false

# Extreme Performance Monitoring
# Enable minimal performance counters only
enableMinimalMonitoring=true

# Monitoring sample rate (higher = less overhead)
monitoringSampleRate=100

# Performance threshold warnings disabled for maximum speed
enablePerformanceWarnings=false

# Feature Flags for Controlled Deployment
# Enable feature flags for gradual rollout
enableFeatureFlags=true

# Enable auto-rollback mechanism
enableAutoRollback=true

# Rollback threshold (performance degradation percentage)
rollbackThreshold=20.0

# Monitoring interval for rollback checks (ticks)
rollbackCheckInterval=1000