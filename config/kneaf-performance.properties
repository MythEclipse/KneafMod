# Kneaf performance mod configuration
# Enable/disable the performance manager
enabled=true

# Number of threads in the background worker pool (minimum 1)
threadPoolSize=4

# How often (in ticks) to append metrics to run/logs/kneaf-performance.log
logIntervalTicks=100

# TPS threshold to prefer async processing (rolling average). When avg TPS >= this value,
# heavy processing will be offloaded to background threads. Set high to reduce background work.
tpsThresholdForAsync=19.0

# Profiling configuration
# Enable/disable performance profiling
profilingEnabled=true

# Threshold in milliseconds for considering a tick "slow" and logging detailed timing
slowTickThresholdMs=50

# Sample rate for profiling (1 = every tick, 2 = every 2nd tick, etc.)
profilingSampleRate=1

# Advanced Parallelism Configuration
# Minimum number of threads in the pool (dynamic scaling)
minThreadPoolSize=2

# Enable dynamic thread scaling based on workload
dynamicThreadScaling=true

# Thread pool utilization threshold to scale up (0.0-1.0)
threadScaleUpThreshold=0.8

# Thread pool utilization threshold to scale down (0.0-1.0)
threadScaleDownThreshold=0.3

# Delay in ticks before scaling up thread count
threadScaleUpDelayTicks=100

# Delay in ticks before scaling down thread count
threadScaleDownDelayTicks=200

# Enable work-stealing for better load balancing
workStealingEnabled=true

# Maximum queue size for work-stealing
workStealingQueueSize=100

# Enable CPU-aware thread sizing
cpuAwareThreadSizing=true

# CPU load threshold for thread sizing decisions (0.0-1.0)
cpuLoadThreshold=0.7

# Keep-alive time in seconds for idle threads
threadPoolKeepAliveSeconds=60

# Chunk Storage Configuration
# Enable FastNBT mode for high-performance NBT serialization (default: false)
enableFastNbt=false

# Swap I/O Optimization Configuration
# Enable asynchronous prefetching for swap operations (default: false)
swapAsyncPrefetching=true

# Enable compression for swap data (default: false)
swapCompression=true

# Compression level (0-9, 0=none, 9=maximum)
swapCompressionLevel=6

# Enable memory-mapped files for swap operations (default: false)
swapMemoryMappedFiles=true

# Maximum number of concurrent async prefetch operations
swapAsyncPrefetchLimit=4

# Prefetch buffer size in MB
swapPrefetchBufferSize=64

# Non-blocking I/O mode (true=non-blocking, false=blocking)
swapNonBlockingIo=true

# Memory-mapped file cache size in MB
swapMmapCacheSize=128

# Enable swap operation batching (default: true)
swapOperationBatching=true

# Maximum batch size for swap operations
swapMaxBatchSize=32
